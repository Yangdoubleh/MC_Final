<!DOCTYPE html>
<html>
<head>
<link rel="stylesheet"
	href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.5.0/font/bootstrap-icons.css">
<meta charset="UTF-8" />
<title>멀캠세끼</title>
<meta name="viewport" content="width=device-width, initial-scale=1" />
<link rel="stylesheet" href="styles/reset.min.css" />
<link rel="stylesheet" href="styles/style.css" />
<link rel="stylesheet" href="styles/header.css" />
<style type="text/css">
.write_Btn{
	width:80px;
	height:35px;
	margin:3px;
	background-color: #d39a9d ;
	color: #fff;
	font-size:15px;
	font-weight: bold;
	border-radius:5px;
	border:2px solid #d39a9d;
	display:inline-block;
	cursor:pointer;
	text-decoration:none;
	text-align: center;
}
</style>
</head>
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery-cookie/1.4.1/jquery.cookie.min.js"></script>
<script type="text/javascript" src="js/my.js"></script>
<script type="text/javascript">

$(document).ready(function(){
	const memberID=$.cookie("memberID");
	$.post("membermenuList", {memberID}, function(membermenuList){
		if (JSON.parse(membermenuList).length){
			for(var i=0; i<JSON.parse(membermenuList).length; i++){
				const foodName = JSON.parse(membermenuList)[i].foodName;
				const imageURL = JSON.parse(membermenuList)[i].imageURL;
				const recipeURL = JSON.parse(membermenuList)[i].recipeURL;
				const kcal = JSON.parse(membermenuList)[i].kcal;
				const carb = JSON.parse(membermenuList)[i].carb;
				const prot = JSON.parse(membermenuList)[i].prot;
				const fat = JSON.parse(membermenuList)[i].fat;
				const foodDate = JSON.parse(membermenuList)[i].foodDate;
				$("#MenuDiv_"+i).html("<br><h2>"+foodName+"</h2><br><img src='"+imageURL+"'><button id='recipeBtn"+i+"'>레시피 보기</button> <button id='deleteBtn"+i+"'>삭제하기</button><h4>칼로리 : "+kcal+" kcal</h4><h4>탄수화물 : "+carb+" g</h4><h4>단백질 : "+prot+" g</h4><h4>지방 : "+fat+" g</h4><h4>식단한 일자 : "+foodDate+"</h4><br>");
				document.getElementById('MenuDiv_'+i).style.border='3px solid #0A0A0A';
				document.getElementById('MenuDiv_'+i).style.background='#f5f5f5';
				document.getElementById('MenuDiv_'+i).style.width='380px';
				document.getElementById('MenuDiv_'+i).style.height='auto';
			}
		} else {
			for(var i=0; i<5; i++){
				const foodName = JSON.parse(membermenuList)[i].foodName;
				const imageURL = JSON.parse(membermenuList)[i].imageURL;
				const recipeURL = JSON.parse(membermenuList)[i].recipeURL;
				const kcal = JSON.parse(membermenuList)[i].kcal;
				const carb = JSON.parse(membermenuList)[i].carb;
				const prot = JSON.parse(membermenuList)[i].prot;
				const fat = JSON.parse(membermenuList)[i].fat;
				const foodDate = JSON.parse(membermenuList)[i].foodDate;
				$("#MenuDiv_"+i).html("<br><h2>"+foodName+"</h2><br><img src='"+imageURL+"'><button id='recipeBtn"+i+"'>레시피 보기</button> <button id='deleteBtn"+i+"'>삭제하기</button><h4>칼로리 : "+kcal+" kcal</h4><h4>탄수화물 : "+carb+" g</h4><h4>단백질 : "+prot+" g</h4><h4>지방 : "+fat+" g</h4><h4>식단한 일자 : "+foodDate+"</h4><br>");
				document.getElementById('MenuDiv_'+i).style.border='3px solid #0A0A0A';
				document.getElementById('MenuDiv_'+i).style.background='#f5f5f5';
				document.getElementById('MenuDiv_'+i).style.width='380px';
				document.getElementById('MenuDiv_'+i).style.height='auto';
			}
		}
		
		//레시피 보기 버튼 기능
		$(document).on('click',"#recipeBtn0",function(){
			const foodName = JSON.parse(membermenuList)[0].foodName;
			const imageURL = JSON.parse(membermenuList)[0].imageURL;
			const recipeURL = JSON.parse(membermenuList)[0].recipeURL;
			const kcal = JSON.parse(membermenuList)[0].kcal;
			const carb = JSON.parse(membermenuList)[0].carb;
			const prot = JSON.parse(membermenuList)[0].prot;
			const fat = JSON.parse(membermenuList)[0].fat;
			window.open(recipeURL);
		});
		$(document).on('click',"#recipeBtn1",function(){
			const foodName = JSON.parse(membermenuList)[1].foodName;
			const imageURL = JSON.parse(membermenuList)[1].imageURL;
			const recipeURL = JSON.parse(membermenuList)[1].recipeURL;
			const kcal = JSON.parse(membermenuList)[1].kcal;
			const carb = JSON.parse(membermenuList)[1].carb;
			const prot = JSON.parse(membermenuList)[1].prot;
			const fat = JSON.parse(membermenuList)[1].fat;
			window.open(recipeURL);
		});
		$(document).on('click',"#recipeBtn2",function(){
			const foodName = JSON.parse(membermenuList)[2].foodName;
			const imageURL = JSON.parse(membermenuList)[2].imageURL;
			const recipeURL = JSON.parse(membermenuList)[2].recipeURL;
			const kcal = JSON.parse(membermenuList)[2].kcal;
			const carb = JSON.parse(membermenuList)[2].carb;
			const prot = JSON.parse(membermenuList)[2].prot;
			const fat = JSON.parse(membermenuList)[2].fat;
			window.open(recipeURL);
		});
		$(document).on('click',"#recipeBtn3",function(){
			const foodName = JSON.parse(membermenuList)[3].foodName;
			const imageURL = JSON.parse(membermenuList)[3].imageURL;
			const recipeURL = JSON.parse(membermenuList)[3].recipeURL;
			const kcal = JSON.parse(membermenuList)[3].kcal;
			const carb = JSON.parse(membermenuList)[3].carb;
			const prot = JSON.parse(membermenuList)[3].prot;
			const fat = JSON.parse(membermenuList)[3].fat;
			window.open(recipeURL);
		});
		$(document).on('click',"#recipeBtn4",function(){
			const foodName = JSON.parse(membermenuList)[4].foodName;
			const imageURL = JSON.parse(membermenuList)[4].imageURL;
			const recipeURL = JSON.parse(membermenuList)[4].recipeURL;
			const kcal = JSON.parse(membermenuList)[4].kcal;
			const carb = JSON.parse(membermenuList)[4].carb;
			const prot = JSON.parse(membermenuList)[4].prot;
			const fat = JSON.parse(membermenuList)[4].fat;
			window.open(recipeURL);
		});
		
		//식단 삭제 버튼 기능
		$("#deleteBtn0").click(function(){
			var result = confirm("정말 삭제 하시겠습니까?");
			if(result){
				const foodName = JSON.parse(membermenuList)[0].foodName;
				const foodDate = JSON.parse(membermenuList)[0].foodDate;
				$.post("deleteMemberMenu",{memberID, foodName, foodDate},function(msg){
					alert(msg);
					location.href="menu.html";
				});
			} else{}
		});
		$("#deleteBtn1").click(function(){
			var result = confirm("정말 삭제 하시겠습니까?");
			if(result){
				const foodName = JSON.parse(membermenuList)[1].foodName;
				const foodDate = JSON.parse(membermenuList)[1].foodDate;
				$.post("deleteMemberMenu",{memberID, foodName, foodDate},function(msg){
					alert(msg);
					location.href="menu.html";
				});
			} else{}
		});
		$("#deleteBtn2").click(function(){
			var result = confirm("정말 삭제 하시겠습니까?");
			if(result){
				const foodName = JSON.parse(membermenuList)[2].foodName;
				const foodDate = JSON.parse(membermenuList)[2].foodDate;
				$.post("deleteMemberMenu",{memberID, foodName, foodDate},function(msg){
					alert(msg);
					location.href="menu.html";
				});
			} else{}
		});
		$("#deleteBtn3").click(function(){
			var result = confirm("정말 삭제 하시겠습니까?");
			if(result){
				const foodName = JSON.parse(membermenuList)[3].foodName;
				const foodDate = JSON.parse(membermenuList)[3].foodDate;
				$.post("deleteMemberMenu",{memberID, foodName, foodDate},function(msg){
					alert(msg);
					location.href="menu.html";
				});
			} else{}
		});
		$("#deleteBtn4").click(function(){
			var result = confirm("정말 삭제 하시겠습니까?");
			if(result){
				const foodName = JSON.parse(membermenuList)[4].foodName;
				const foodDate = JSON.parse(membermenuList)[4].foodDate;
				$.post("deleteMemberMenu",{memberID, foodName, foodDate},function(msg){
					alert(msg);
					location.href="menu.html";
				});
			} else{}
		});
		
	});
});
</script>
<body>
	<!-- Header Start -->
	<header class="site-header">
		<div class="wrapper site-header__wrapper">
			<nav class="nav"></nav>
			<a href="main.html" class="brand">멀캠세끼</a>
			<nav class="nav">
				<a href="voice_chatbot.html"  class="chat_Btn" type="button"><i
					class="bi bi-chat-right-dots"></i></a>
				<button class="nav__toggle" type="button">
					<i class="bi bi-justify"></i>
				</button>
				<ul class="nav__wrapper">
					<span id="idSpan" class="welcome"><li> 환영합니다!</li></span>
					<li class="nav__item"><a href="main.html"><i
							class="bi bi-house-fill" style="font-size: 25px;"></i>&nbsp;&nbsp;&nbsp;
							홈</a></li>
					<li class="nav__item"><a href="menu.html"><i
							class="bi bi-layout-text-window-reverse" style="font-size: 25px;"></i>&nbsp;&nbsp;&nbsp;
							나의 식단</a></li>
					<li class="nav__item2"><a href="basket.html"><i class="bi bi-basket"
							style="font-size: 25px;"></i>&nbsp;&nbsp;&nbsp;장바구니</a></li>
					<br>
					<li class="nav__item"><a href="mypage.html"><i
							class="bi bi-person-fill" style="font-size: 25px;"></i>&nbsp;&nbsp;&nbsp;마이페이지</a></li>
					<li class="nav__item"><a id="logoutBtn" href="index.html"><i
							class="bi bi-door-open" style="font-size: 25px;"></i>&nbsp;&nbsp;&nbsp;로그아웃</a></li>
				</ul>
			</nav>
		</div>
	</header>
	<!-- Header End -->
	<div class="main-form">
		<br>
		<br>
		<h5>나의 식단 보기 <button class="write_Btn" onclick="location.href='../membermenuWriteForm'">식단입력</button></h5>
		<br>
		<div id="MenuDiv_0">식단에 저장된 음식이 없습니다.</div><br> <br>
		<div id="MenuDiv_1"></div><br> <br>
		<div id="MenuDiv_2"></div><br> <br>
		<div id="MenuDiv_3"></div><br> <br>
		<div id="MenuDiv_4"></div>
	</div>

	<script src="js/header.js"></script>
</body>
</html>
